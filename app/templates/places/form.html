{% extends "base.html" %}
{% block content %}
  <h2 class="text-lg font-semibold mb-4">{{ 'Edit' if item else 'New' }} Place</h2>
  {% if item %}
    <div class="mb-4 bg-white border rounded p-3">
      <div class="font-semibold mb-2">Objects in this place</div>
      {% if objects_here and objects_here|length > 0 %}
        <ul class="list-disc ml-5 space-y-1">
          {% for o in objects_here %}
            <li>{{ o.name }}</li>
          {% endfor %}
        </ul>
      {% else %}
        <div class="text-sm text-gray-600">No objects currently saved here.</div>
      {% endif %}
    </div>
  {% endif %}
  <form method="post" action="{{ '/places/' + item.id if item else '/places' }}" class="space-y-3">
    <div>
      <label class="block text-sm">ID (human readable, immutable)</label>
      <input name="place_id" value="{{ item.id if item else '' }}" {% if item %}readonly{% endif %} class="border rounded px-3 py-2 w-full font-mono" required />
    </div>
    <div>
      <label class="block text-sm">Name</label>
      <input name="name" value="{{ item.name if item else '' }}" class="border rounded px-3 py-2 w-full" required />
    </div>
    <div>
      <label class="block text-sm">Description</label>
      <textarea name="description" class="border rounded px-3 py-2 w-full" rows="3">{{ item.description if item else '' }}</textarea>
    </div>
    <div>
      <label class="block text-sm">Images (comma separated URLs)</label>
      <input name="images" value="{{ ','.join(item.images) if item and item.images else '' }}" class="border rounded px-3 py-2 w-full" />
    </div>
    <div>
      <label class="block text-sm">Put At (ISO datetime)</label>
      <input name="put_at" value="{{ item.put_at.isoformat() if item and item.put_at else '' }}" class="border rounded px-3 py-2 w-full" />
    </div>
    <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded">Save</button>
  </form>
{% endblock %}